import { connectToDatabase } from '../connect';
import ClothingRecommendation from '../models/ClothingRecommendation';

/**
 * Данные для температурных диапазонов и рекомендаций по одежде
 */
export const clothingRecommendationsData = [
  // Экстремально холодно (ниже -25°C)
  {
    tempRange: 'extreme_freezing',
    minTemp: -100,
    maxTemp: -25,
    activityType: 'walk',
    recommendations: {
      essential: ['теплый пуховик с капюшоном', 'шапка-ушанка', 'термобелье (верх и низ)', 'тёплый свитер', 'утепленные штаны', 'зимние ботинки с утеплителем', 'термоноски', 'подшлемник', 'теплые рукавицы с утеплителем'],
      recommended: ['защитная маска для лица', 'химические грелки для рук и ног', 'шарф из шерсти', 'второй слой перчаток/рукавиц'],
      accessories: ['термос с горячим напитком', 'бальзам для губ', 'солнцезащитные очки (при ярком солнце)'],
      avoid: ['металлические украшения', 'хлопковое белье', 'тонкая обувь', 'открытые участки кожи']
    },
    weatherModifiers: [
      {
        condition: 'strong_wind',
        add: ['ветрозащитный костюм', 'маска для лица', 'дополнительный слой одежды'],
        avoid: ['свободная/объемная одежда']
      },
      {
        condition: 'snow',
        add: ['водонепроницаемая верхняя одежда', 'снегоступы/зимние ботинки с высоким голенищем'],
        avoid: ['обувь без хорошего протектора']
      }
    ],
    season: 'winter',
    tips: [
      'Одевайтесь многослойно: базовый слой - термобелье, средний слой - утепляющий, внешний слой - защитный',
      'Избегайте сильного потоотделения, так как при остановке мокрая одежда быстро охлаждается',
      'Регулярно заходите в теплые помещения',
      'Ограничьте время пребывания на улице до 15-20 минут'
    ]
  },
  {
    tempRange: 'extreme_freezing',
    minTemp: -100,
    maxTemp: -25,
    activityType: 'sport',
    recommendations: {
      essential: ['специальное термобелье для активности', 'утепленная спортивная куртка', 'теплые спортивные штаны', 'зимняя спортивная шапка', 'теплые спортивные перчатки/рукавицы', 'термоноски', 'зимние кроссовки с утеплителем'],
      recommended: ['ветрозащитная маска для лица', 'шарф/бафф из микрофлиса', 'легкий утепленный жилет'],
      accessories: ['термос с теплым напитком', 'химические грелки', 'защитный крем для лица'],
      avoid: ['хлопковая одежда', 'слишком тяжелая экипировка', 'металлические украшения']
    },
    season: 'winter',
    tips: [
      'При такой температуре лучше заниматься спортом в помещении',
      'Если решили заниматься на улице, начните с хорошей разминки в помещении',
      'Ограничьте тренировку 30 минутами',
      'Выбирайте одежду, отводящую влагу, но сохраняющую тепло'
    ]
  },

  // Очень холодно (-25°C до -10°C)
  {
    tempRange: 'freezing',
    minTemp: -25,
    maxTemp: -10,
    activityType: 'walk',
    recommendations: {
      essential: ['теплый пуховик/шуба', 'шапка', 'шарф', 'теплые перчатки/варежки', 'термобелье', 'теплые брюки', 'зимние ботинки'],
      recommended: ['утепленные джинсы/брюки', 'свитер/кофта из шерсти', 'термоноски'],
      accessories: ['бальзам для губ', 'термос с горячим напитком'],
      avoid: ['тонкая обувь', 'хлопковое белье', 'легкая верхняя одежда']
    },
    season: 'winter',
    tips: [
      'Одевайтесь многослойно для лучшей теплоизоляции',
      'Выбирайте обувь на размер больше, чтобы можно было надеть теплые носки',
      'Защищайте открытые участки кожи от мороза'
    ]
  },

  // Холодно (-10°C до 0°C)
  {
    tempRange: 'very_cold',
    minTemp: -10,
    maxTemp: 0,
    activityType: 'walk',
    recommendations: {
      essential: ['зимняя куртка/пальто', 'шапка', 'перчатки', 'шарф', 'зимняя обувь'],
      recommended: ['теплый свитер', 'джинсы/брюки', 'теплые носки'],
      accessories: ['бальзам для губ'],
      avoid: ['тонкая подошва обуви', 'одежда, пропускающая ветер']
    },
    season: 'winter',
    tips: [
      'В этом диапазоне важно защитить конечности, особенно пальцы рук и ног',
      'Головной убор должен закрывать уши'
    ]
  },

  // Прохладно (0°C до 10°C)
  {
    tempRange: 'cold',
    minTemp: 0,
    maxTemp: 10,
    activityType: 'walk',
    recommendations: {
      essential: ['куртка/пальто средней теплоты', 'головной убор', 'перчатки'],
      recommended: ['шарф', 'свитер/кофта', 'джинсы/брюки'],
      accessories: ['зонт при осадках'],
      avoid: ['слишком легкая одежда']
    },
    season: 'fall',
    tips: [
      'В этом диапазоне температур погода может быстро меняться',
      'Лучше взять с собой дополнительный слой одежды, который можно снять при необходимости'
    ]
  },

  // Умеренно прохладно (10°C до 15°C)
  {
    tempRange: 'cool',
    minTemp: 10,
    maxTemp: 15,
    activityType: 'walk',
    recommendations: {
      essential: ['легкая куртка/ветровка'],
      recommended: ['свитер/кофта', 'джинсы/брюки'],
      accessories: ['легкий шарф', 'зонт при осадках'],
      avoid: []
    },
    season: 'spring',
    tips: [
      'Одевайтесь в несколько слоев, которые можно снять, если станет теплее'
    ]
  },

  // Умеренно (15°C до 20°C)
  {
    tempRange: 'mild',
    minTemp: 15,
    maxTemp: 20,
    activityType: 'walk',
    recommendations: {
      essential: ['футболка/рубашка', 'легкая кофта/свитер'],
      recommended: ['джинсы/брюки/юбка'],
      accessories: ['легкая куртка/ветровка на вечер'],
      avoid: []
    },
    season: 'spring',
    tips: [
      'Комфортная температура, но может потребоваться дополнительный слой утром и вечером'
    ]
  },

  // Тепло (20°C до 25°C)
  {
    tempRange: 'warm',
    minTemp: 20,
    maxTemp: 25,
    activityType: 'walk',
    recommendations: {
      essential: ['футболка/рубашка', 'легкие брюки/джинсы/шорты/юбка'],
      recommended: ['легкая обувь', 'бейсболка/панама'],
      accessories: ['солнцезащитные очки', 'солнцезащитный крем'],
      avoid: ['слишком теплая одежда']
    },
    season: 'summer',
    tips: [
      'Выбирайте одежду из натуральных тканей, хорошо пропускающих воздух',
      'Не забудьте о защите от солнца'
    ]
  },

  // Жарко (25°C до 30°C)
  {
    tempRange: 'hot',
    minTemp: 25,
    maxTemp: 30,
    activityType: 'walk',
    recommendations: {
      essential: ['футболка/майка из натуральных тканей', 'шорты/легкая юбка'],
      recommended: ['головной убор', 'сандалии/легкая обувь'],
      accessories: ['солнцезащитные очки', 'солнцезащитный крем', 'бутылка воды'],
      avoid: ['синтетические ткани', 'темная одежда']
    },
    season: 'summer',
    tips: [
      'Выбирайте свободную, светлую одежду из натуральных тканей',
      'Пейте больше воды',
      'Старайтесь находиться в тени в самое жаркое время дня'
    ]
  },

  // Очень жарко (30°C до 35°C)
  {
    tempRange: 'very_hot',
    minTemp: 30,
    maxTemp: 35,
    activityType: 'walk',
    recommendations: {
      essential: ['максимально легкая одежда из натуральных тканей', 'головной убор'],
      recommended: ['сандалии/легкая обувь', 'солнцезащитные очки'],
      accessories: ['солнцезащитный крем', 'бутылка воды', 'мини-вентилятор'],
      avoid: ['синтетические ткани', 'плотная/тесная одежда', 'черный цвет']
    },
    season: 'summer',
    tips: [
      'Избегайте активности в самое жаркое время дня (с 11:00 до 16:00)',
      'Регулярно пейте воду, даже если не чувствуете жажды',
      'Наносите солнцезащитный крем каждые 2 часа'
    ]
  },

  // Экстремально жарко (выше 35°C)
  {
    tempRange: 'extreme_hot',
    minTemp: 35,
    maxTemp: 100,
    activityType: 'walk',
    recommendations: {
      essential: ['максимально легкая одежда из натуральных тканей', 'широкополая шляпа/панама'],
      recommended: ['одежда с УФ-защитой', 'свободные брюки/юбки из тонких тканей'],
      accessories: ['солнцезащитный крем с SPF 50+', 'солнцезащитные очки', 'термос с холодной водой', 'мини-вентилятор'],
      avoid: ['физическая активность на открытом воздухе', 'синтетические ткани', 'темная одежда']
    },
    season: 'summer',
    tips: [
      'Старайтесь вообще не выходить на улицу в пиковые часы жары',
      'Охлаждайте запястья и шею холодной водой',
      'Держитесь в тени и кондиционируемых помещениях',
      'Пейте электролитные напитки для восполнения минералов'
    ]
  },

  // Переходная погода весна (холодно-умеренно)
  {
    tempRange: 'spring_transition',
    minTemp: 5,
    maxTemp: 15,
    activityType: 'walk',
    recommendations: {
      essential: ['ветровка/лёгкая куртка', 'зонт'],
      recommended: ['водонепроницаемая обувь', 'шарф', 'свитер или кофта'],
      accessories: ['головной убор', 'перчатки'],
      avoid: ['слишком теплая одежда без возможности снять слой']
    },
    season: 'transition',
    weatherModifiers: [
      {
        condition: 'rain',
        add: ['непромокаемая куртка/плащ', 'резиновые сапоги/водонепроницаемая обувь', 'зонт'],
        avoid: ['замшевая обувь', 'джинсы (долго сохнут)']
      },
      {
        condition: 'variable',
        add: ['многослойная одежда', 'лёгкий шарф'],
        avoid: ['одежда, которую нельзя легко снять при потеплении']
      }
    ],
    tips: [
      'Одевайтесь многослойно - весной температура может сильно колебаться в течение дня',
      'Всегда берите с собой зонт, даже при солнечном прогнозе',
      'Выбирайте водоотталкивающую верхнюю одежду',
      'Утром и вечером обычно прохладнее, учитывайте это при выборе одежды'
    ]
  },

  // Переходная погода осень (умеренно-холодно)
  {
    tempRange: 'fall_transition',
    minTemp: 5,
    maxTemp: 15,
    activityType: 'walk',
    recommendations: {
      essential: ['куртка/тренч средней теплоты', 'зонт', 'водонепроницаемая обувь'],
      recommended: ['шарф', 'кофта/свитер', 'джинсы/брюки'],
      accessories: ['перчатки', 'шапка (на вечер)'],
      avoid: ['слишком легкая одежда']
    },
    season: 'transition',
    weatherModifiers: [
      {
        condition: 'rain',
        add: ['водонепроницаемая куртка', 'водонепроницаемая обувь', 'зонт'],
        avoid: ['замшевая обувь', 'одежда из быстро промокающих материалов']
      },
      {
        condition: 'strong_wind',
        add: ['ветрозащитная куртка', 'шарф'],
        avoid: ['лёгкие головные уборы, которые может унести ветер']
      },
      {
        condition: 'variable',
        add: ['дополнительный слой одежды в сумке', 'шарф'],
        avoid: ['одежда без возможности регулирования слоёв']
      }
    ],
    tips: [
      'Осенью погода особенно непредсказуема, будьте готовы к резким переменам',
      'Одевайтесь многослойно, чтобы регулировать температуру тела',
      'Выбирайте водоотталкивающую верхнюю одежду и обувь с хорошим протектором',
      'Не забудьте перчатки и шапку — вечерами уже может быть очень холодно'
    ]
  }
];

/**
 * Функция для заполнения базы данных начальными рекомендациями
 */
export async function seedClothingRecommendations() {
  try {
    await connectToDatabase();

    // Удаляем все существующие рекомендации
    await ClothingRecommendation.deleteMany({});

    // Добавляем новые рекомендации
    await ClothingRecommendation.insertMany(clothingRecommendationsData);

    console.log('База данных успешно заполнена рекомендациями по одежде');
  } catch (error) {
    console.error('Ошибка при заполнении базы данных:', error);
    throw error;
  }
}
